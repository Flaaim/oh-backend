<?php

namespace App\TelegramBot\Test\Command\MessageHandler;

use App\TelegramBot\Command\ProcessWebhook\MessageHandler\Command;
use App\TelegramBot\Command\ProcessWebhook\MessageHandler\Response;
use PHPUnit\Framework\Attributes\DataProvider;
use PHPUnit\Framework\TestCase;

class CommandTest extends TestCase
{

    public function testCase(): void
    {
        $value = strtoupper('/start');
        $command = new Command();
        self::assertEquals(
            new Response(
                "Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ±Ğ¾Ñ‚Ğ° ÑĞ°Ğ¹Ñ‚Ğ° https://olimpoks-help.ru.\n\n"
                . "Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹:\n"
                . "/help - ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ",
                [
                    'inline_keyboard' => [
                        [
                            ['text' => 'ğŸš€ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ Ğ.1', 'callback_data' => 'get_answers'],
                        ],
                    ]
                ]
            ),
            $command->processCommand($value));
    }
    #[dataProvider('dataProvider')]
    public function testSuccess($message, $expected): void
    {
        $command = new Command();
        self::assertEquals($expected, $command->processCommand($message));
    }


    public static function dataProvider(): array
    {
        return [
            [
                '/start', new Response(
                    "Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ±Ğ¾Ñ‚Ğ° ÑĞ°Ğ¹Ñ‚Ğ° https://olimpoks-help.ru.\n\n"
                    . "Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹:\n"
                    . "/help - ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ",
                    [
                        'inline_keyboard' => [
                            [
                                ['text' => 'ğŸš€ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ Ğ.1', 'callback_data' => 'get_answers'],
                            ],
                        ]
                    ]
                ),
            ],
            [
                '/help', new Response(
                    "ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ Ğ¿Ğ¾ Ğ±Ğ¾Ñ‚Ñƒ:\n\n"
                    . "/start - ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ Ñ Ğ±Ğ¾Ñ‚Ğ¾Ğ¼\n"
                    . "/help - ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ñƒ ÑĞ¿Ñ€Ğ°Ğ²ĞºÑƒ\n\n"
                    . "Ğ¡Ğ°Ğ¹Ñ‚: https://olimpoks-help.ru"
                ),
            ],
            [
                'message', new Response("Ğ’Ñ‹ ÑĞºĞ°Ğ·Ğ°Ğ»Ğ¸: \"message\"\n\nĞ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ /help Ğ´Ğ»Ñ ÑĞ¿Ğ¸ÑĞºĞ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´", null)
            ],
            [
                '/test', new Response("ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ°Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°: \"/test\"\n\nĞ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ /help Ğ´Ğ»Ñ ÑĞ¿Ğ¸ÑĞºĞ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ñ… ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´", null)
            ],
            [
                '/START', new Response(
                    "Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ±Ğ¾Ñ‚Ğ° ÑĞ°Ğ¹Ñ‚Ğ° https://olimpoks-help.ru.\n\n"
                    . "Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹:\n"
                    . "/help - ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ",
                    [
                        'inline_keyboard' => [
                            [
                                ['text' => 'ğŸš€ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ Ğ.1', 'callback_data' => 'get_answers'],
                            ],
                        ]
                    ],
                )
            ],
        ];
    }

}